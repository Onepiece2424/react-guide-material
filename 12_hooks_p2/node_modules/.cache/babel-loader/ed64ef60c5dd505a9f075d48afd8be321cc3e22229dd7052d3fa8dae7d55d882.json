{"ast":null,"code":"var _jsxFileName = \"/Users/naganorioto/react-guide-material/12_hooks_p2/src/060_useEffect_click/start/Timer.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useLayoutEffect } from 'react';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Timer = () => {\n  _s();\n  // タイマーの秒数を管理するstate\n  const [time, setTime] = useState(0);\n\n  // ボタンの切り替えを行うstate\n  const [start, setStart] = useState(false);\n  useEffect(() => {\n    console.log('init');\n    let intervalId = null;\n    if (start) {\n      intervalId = window.setInterval(() => {\n        console.log('interval running');\n        setTime(prev => prev + 1);\n      }, 1000);\n    }\n    return () => {\n      window.clearInterval(intervalId);\n      console.log('end');\n    };\n  }, [start]);\n  useEffect(() => {\n    console.log('updated');\n    document.title = 'counter:' + time;\n    window.localStorage.setItem('time-key', time);\n    return () => {\n      // debugger\n      console.log('updated end');\n    };\n  }, [time]);\n  useLayoutEffect(() => {\n    const _time = parseInt(window.localStorage.getItem('time-key'));\n    if (!isNaN(_time)) {\n      setTime(_time);\n    }\n  }, []);\n\n  // 一時停止\n  const stop = () => {\n    setStart(start => !start);\n  };\n\n  // スタート\n  const startTimer = () => {\n    setStart(start => !start);\n  };\n\n  // リセット\n  const reset = () => {\n    setTime(0);\n    setStart(start => !start);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [/*#__PURE__*/_jsxDEV(\"time\", {\n        children: time\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u79D2\\u7D4C\\u904E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [start ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stop,\n        children: \"\\u4E00\\u6642\\u505C\\u6B62\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startTimer,\n        children: \"\\u30B9\\u30BF\\u30FC\\u30C8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: reset,\n        children: \"\\u30EA\\u30BB\\u30C3\\u30C8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Timer, \"immzTOb0/ZuTazn1LfbFn1u2SR0=\");\n_c = Timer;\nexport default Timer;\nvar _c;\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["useState","useEffect","useLayoutEffect","Timer","time","setTime","start","setStart","console","log","intervalId","window","setInterval","prev","clearInterval","document","title","localStorage","setItem","_time","parseInt","getItem","isNaN","stop","startTimer","reset"],"sources":["/Users/naganorioto/react-guide-material/12_hooks_p2/src/060_useEffect_click/start/Timer.jsx"],"sourcesContent":["import { useState, useEffect, useLayoutEffect } from 'react'\n\nconst Timer = () => {\n  // タイマーの秒数を管理するstate\n  const [time, setTime] = useState(0);\n\n  // ボタンの切り替えを行うstate\n  const [start, setStart] = useState(false)\n\n  useEffect(() => {\n    console.log('init');\n    let intervalId = null;\n    if (start) {\n      intervalId = window.setInterval(() => {\n      console.log('interval running');\n      setTime(prev => prev + 1);\n      }, 1000);\n    }\n    return () => {\n      window.clearInterval(intervalId)\n      console.log('end');\n    }\n  }, [start])\n\n  useEffect(() => {\n    console.log('updated');\n    document.title = 'counter:' + time;\n    window.localStorage.setItem('time-key', time);\n\n    return () => {\n      // debugger\n      console.log('updated end');\n    }\n  }, [time]);\n\n  useLayoutEffect(() => {\n    const _time = parseInt(window.localStorage.getItem('time-key'));\n    if(!isNaN(_time)) {\n      setTime(_time);\n    }\n  }, [])\n\n  // 一時停止\n  const stop = () => {\n    setStart(start => !start)\n  };\n\n  // スタート\n  const startTimer = () => {\n    setStart(start => !start)\n  }\n\n  // リセット\n  const reset = () => {\n    setTime(0)\n    setStart(start => !start)\n  }\n\n  return (\n    <>\n      <h3>\n        <time>{time}</time>\n        <span>秒経過</span>\n      </h3>\n      <div>\n          { start ?\n          <button onClick={stop}>一時停止</button>\n           :\n          <button onClick={startTimer}>スタート</button> }\n        <button onClick={reset}>リセット</button>\n      </div>\n    </>\n    );\n};\n\nexport default Timer;\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,eAAe,QAAQ,OAAO;AAAA;AAAA;AAE5D,MAAMC,KAAK,GAAG,MAAM;EAAA;EAClB;EACA,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGL,QAAQ,CAAC,CAAC,CAAC;;EAEnC;EACA,MAAM,CAACM,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EAEzCC,SAAS,CAAC,MAAM;IACdO,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IACnB,IAAIC,UAAU,GAAG,IAAI;IACrB,IAAIJ,KAAK,EAAE;MACTI,UAAU,GAAGC,MAAM,CAACC,WAAW,CAAC,MAAM;QACtCJ,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QAC/BJ,OAAO,CAACQ,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;MACzB,CAAC,EAAE,IAAI,CAAC;IACV;IACA,OAAO,MAAM;MACXF,MAAM,CAACG,aAAa,CAACJ,UAAU,CAAC;MAChCF,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IACpB,CAAC;EACH,CAAC,EAAE,CAACH,KAAK,CAAC,CAAC;EAEXL,SAAS,CAAC,MAAM;IACdO,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;IACtBM,QAAQ,CAACC,KAAK,GAAG,UAAU,GAAGZ,IAAI;IAClCO,MAAM,CAACM,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEd,IAAI,CAAC;IAE7C,OAAO,MAAM;MACX;MACAI,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;IAC5B,CAAC;EACH,CAAC,EAAE,CAACL,IAAI,CAAC,CAAC;EAEVF,eAAe,CAAC,MAAM;IACpB,MAAMiB,KAAK,GAAGC,QAAQ,CAACT,MAAM,CAACM,YAAY,CAACI,OAAO,CAAC,UAAU,CAAC,CAAC;IAC/D,IAAG,CAACC,KAAK,CAACH,KAAK,CAAC,EAAE;MAChBd,OAAO,CAACc,KAAK,CAAC;IAChB;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMI,IAAI,GAAG,MAAM;IACjBhB,QAAQ,CAACD,KAAK,IAAI,CAACA,KAAK,CAAC;EAC3B,CAAC;;EAED;EACA,MAAMkB,UAAU,GAAG,MAAM;IACvBjB,QAAQ,CAACD,KAAK,IAAI,CAACA,KAAK,CAAC;EAC3B,CAAC;;EAED;EACA,MAAMmB,KAAK,GAAG,MAAM;IAClBpB,OAAO,CAAC,CAAC,CAAC;IACVE,QAAQ,CAACD,KAAK,IAAI,CAACA,KAAK,CAAC;EAC3B,CAAC;EAED,oBACE;IAAA,wBACE;MAAA,wBACE;QAAA,UAAOF;MAAI;QAAA;QAAA;QAAA;MAAA,QAAQ,eACnB;QAAA,UAAM;MAAG;QAAA;QAAA;QAAA;MAAA,QAAO;IAAA;MAAA;MAAA;MAAA;IAAA,QACb,eACL;MAAA,WACME,KAAK,gBACP;QAAQ,OAAO,EAAEiB,IAAK;QAAA,UAAC;MAAI;QAAA;QAAA;QAAA;MAAA,QAAS,gBAEpC;QAAQ,OAAO,EAAEC,UAAW;QAAA,UAAC;MAAI;QAAA;QAAA;QAAA;MAAA,QAAS,eAC5C;QAAQ,OAAO,EAAEC,KAAM;QAAA,UAAC;MAAI;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QACjC;EAAA,gBACL;AAEP,CAAC;AAAC,GAvEItB,KAAK;AAAA,KAALA,KAAK;AAyEX,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}